<h1>Edit a Bug</h1>
  <% if current_user.id == @bug.solver_id || @bug.solver_id.blank? %>
    <%= @bug.solver_id? ? (link_to 'Remove Developer', update_solver_developer_project_bug_path(@bug.project_id, @bug), method: :patch, remote: true, class: 'btn btn-danger') : (link_to 'Add Developer',update_solver_developer_project_bug_path(@bug.project_id, @bug), method: :patch, remote: true, class: 'btn btn-dark') %>
  <% else %>
    <%= @bug.solver_id? ? (link_to 'Remove Developer', update_solver_developer_project_bug_path(@bug.project_id, @bug), method: :patch, remote: true, class: 'btn btn-danger disabled') : (link_to 'Add Developer',update_solver_developer_project_bug_path(@bug.project_id, @bug), method: :patch, remote: true, class: 'btn btn-dark disabled') %>
  <% end %>

<div class="row">
  <div class="col-md-12">
    <%= form_for @bug, url: {action: 'update'} do |f| %>
      <%= f.hidden_field :solver_id, value: current_user.id %>

      <div class='form-group mb-3 mt-3'>
        <div class='control-label col-md-8'>
          <%= f.label :title %>
          <%= f.text_field :title, class: 'form-control', placeholder: 'Title of the bug', autofocus: true, readonly: true %>
        </div>
      </div>

      <div class='form-group mb-3'>
        <div class='control-label col-md-8'>
          <%= f.label :description %>
          <%= f.text_area :description, rows: 5, class: 'form-control', placeholder: 'Enter description', readonly: true %>
        </div>
      </div>

      <div class='form-group mb-3'>
        <div class='control-label col-md-8'>
          <%= f.label :Deadline %>
          <%= f.date_field :deadline, as: :date, value: f.object.try(:strftime,"%m/%d/%Y"), class: 'form-control', readonly: true %>
        </div>
      </div>

      <div class='form-group mb-3'>
        <div class='control-label col-md-2'>
          <%= f.label :Select_Type %>
        </div>
        <div class='col-md-8 bugtype'>
          <%= f.collection_select :bug_type, Bug::bug_types.values, :to_s, :titlecase, include_blank: true, class:'form-control' %>
        </div>
      </div>

      <div class='form-group mb-3'>
        <div class='control-label col-md-2'>
          <%= f.label :Status %>
        </div>
        <div class='col-md-8'>
          <%= f.collection_select :status, Bug::statuses.values, :to_s, :titlecase, {include_blank: true}, multiple: false, class: 'select2 form-control' %>
        </div>
      </div>

      %= render 'display_image', object: @bug %>

      <div class='form-group mb-3'>
        <div class='col-md-offset-2 col-md-10'>
          <%= f.submit class: 'btn btn-primary' %>
        </div>
      </div>
      <div class='col-md-4 col-md-offset-4'>
        <%= link_to 'Back', developer_project_bug_path(@bug.project_id), class: 'btn btn-success' %>
      </div>
    <% end %>
  </div>
</div>
